<!DOCTYPE html>
<html>
  <head>
    <title>uProxy sample - copy/paste-initiated peer-to-peer chat</title>

    <link rel="stylesheet" href="main.css">

    <script src='lib/freedom.js'></script>
  </head>

  <body>

    <!-- ========================== 'Start' panel ========================== -->

    <div id="startPanel">
      <p>
        This sample app establishes a chat session between two users.
      <p>
        The intial exchange of signalling messages occurs manually, e.g. via
        email or chat.
      </p>

      <br><br>

      <p class="centered">
        <a id="startPanel_offerLink" class="button">Initiate chat</a>
        <a id="startPanel_answerLink" class="button">Accept invitation</a>
      </p>

    </div>

    <!-- ======================= 'Give access' panel ======================= -->

    <div id="offerPanel" style="display: none;">
      <div id="offerPanel_step1">
        <h1>Accept invitation</h1>

        <p>
          Paste the text received from the other party below and click
          'Generate reply'.
        </p>
        <textarea id="offerPanel_inboundMessage"></textarea>
        <p>
          <button id="offerPanel_consumeInboundMessageButton" disabled>Generate reply</button>
        </p>
      </div>

      <br>
      <div id="offerPanel_step2Container" style="display: none;">
        <textarea id="offerPanel_outboundMessage" readonly></textarea>
        <p>
          Copy/paste the complete text above and send it to the other party.
        </p>
        <p class="warning">
          WARNING:  An observer who sees this message may be able to determine
          that you are chatting, so send it via a private channel you trust.
        </p>
      </div>
    </div>

    <!-- ======================== 'Get access' panel ======================= -->

    <div id="answerPanel" style="display: none;">
      <div id="answerPanel_step1">
        <h1>Initiate chat</h1>

        <p>
          Click the button below to generate a handshake message to send to the
          other party.  This message tells the other party how to locate you on
          the network.  This information can expire quickly, so proceed only
          when you and the other party are ready.
        </p>
        <p>
          <button id="answerPanel_generateIceCandidatesButton">Generate</button>
        </p>
      </div>

      <div id="answerPanel_step2Container" style="display: none;">
        <textarea id="answerPanel_outboundMessage" readonly></textarea>
        <p>
          Copy/paste the complete text above and send it to the other party.
        </p>
        <p class="warning">
          WARNING:  An observer who sees this message may be able to determine
          that you are chatting, so send it via a private channel you trust.
        </p>

        <br>
        <p>
          Paste the text received from the other party below and click 'Start
          chatting'.
        </p>
        <textarea id="answerPanel_inboundMessage"></textarea>
        <p>
          <button id="answerPanel_consumeInboundMessageButton" disabled>Start chatting</button>
        </p>
      </div>
    </div>

    <!-- ====================== Chat panel ================================= -->

    <div id="chatPanel" style="display: none;">
      <p>
        Enter a message in the text box below.  Click Send to transfer it to
        the other party.
      </p>
      <textarea id="chatPanel_outboundMessage"></textarea>
      <p>
        <button id="chatPanel_sendMessageButton">Send message</button>
      </p>
      <p>
        Below is the last message received from the other party.
      </p>
      <textarea id="chatPanel_inboundMessage" readonly></textarea>
    </div>

    <!-- ============================= Scripts ============================= -->

    <script src='main.static.js'></script>

  </body>
</html>
